<div class="add-friends-wrapper">
  <div class="add-friends-section">
    <div class="search">
      <input 
        type="text"
        [(ngModel)]="searchText"
        (input)="onSearchChange()"
        placeholder="Kullanıcı adı / e‑posta / arkadaş kodu"
        class="search-input">
      <button (click)="addFriendByCode()" [disabled]="!searchText?.trim()">Koda göre ekle</button>
    </div>

    <div class="results" *ngIf="users?.length">
      <div class="user-item" *ngFor="let u of users" (click)="selectUser(u)">
        <img [src]="getUserAvatar(u)" width="36" height="36" />
        <div class="info">
          <div class="name">{{u.name}} {{u.lastName}}</div>
          <div class="meta">@{{u.userName}} • {{u.email}}</div>
        </div>

        <ng-container *ngIf="!isAlreadyFriend(u); else alreadyTpl">
          <button (click)="addFriend(u); $event.stopPropagation()" [disabled]="isRequesting(u)">
            {{ isRequesting(u) ? 'Gönderiliyor...' : 'Arkadaş Ekle' }}
          </button>
        </ng-container>
        <ng-template #alreadyTpl>
          <span class="already">Zaten arkadaşsınız</span>
        </ng-template>
      </div>
    </div>
  </div>

  <div class="chat-section">
    <router-outlet></router-outlet>
  </div>
</div>

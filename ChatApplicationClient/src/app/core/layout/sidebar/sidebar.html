<div class="sidebar">
  <div class="profile-section">
  <div class="avatar-row">
    <!-- Mevcut avatar alanÄ±nÄ±z -->
    <div class="avatar-container">
      <img [src]="currentUser?.avatar || 'assets/default-avatar.png'" alt="Profil" class="profile-avatar">
    </div>

    <!-- Bildirim butonu -->
    <div class="fr-anchor">
      <button class="fr-btn" type="button" (click)="toggleRequests()" title="Gelen istekler">
        ðŸ””
        <span class="badge" *ngIf="pendingRequests.length">{{ pendingRequests.length }}</span>
      </button>

      <!-- Dropdown -->
      <div class="fr-dropdown" *ngIf="showRequests">
        <div class="state" *ngIf="requestsLoading">YÃ¼kleniyor...</div>
        <div class="state error" *ngIf="!requestsLoading && requestsError">{{ requestsError }}</div>
        <div class="state" *ngIf="!requestsLoading && !requestsError && !pendingRequests.length">Bekleyen istek yok</div>

        <div class="fr-item" *ngFor="let r of pendingRequests; trackBy: trackByRequest">
          <img class="fr-avatar"
               [src]="r.senderPhotoUrl || 'assets/default-avatar.png'"
               (error)="onAvatarError($event)"
               alt="avatar" />
          <div class="fr-info">
            <div class="fr-name">{{ r.senderName }} {{ r.senderLastName }}</div>
            <div class="fr-meta">{{ r.senderEmail }} â€¢ {{ r.requestDate | date:'short' }}</div>
          </div>
          <div class="fr-actions">
            <button class="accept" (click)="respond(r, true)"  [disabled]="isProcessing(r.friendshipId)">Kabul</button>
            <button class="decline" (click)="respond(r, false)" [disabled]="isProcessing(r.friendshipId)">Reddet</button>
          </div>
        </div>
      </div>
    </div>
  </div>
    <h3>{{ currentUser?.name || 'KullanÄ±cÄ±' }}</h3>
  </div>

  <div class="sidebar-menu">
    <button class="menu-item" [class.active]="isActiveRoute('/chat')" (click)="navigateToChat()">
      <i class="fas fa-comments"></i>
      <span>Sohbetler</span>
    </button>
    <button class="menu-item" [class.active]="isActiveRoute('/add-friends')" (click)="navigateToAddFriends()">
      <i class="fas fa-user-friends"></i>
      <span>ArkadaÅŸ Ekle</span>
    </button>
    <button class="menu-item" [class.active]="isActiveRoute('/profile')" (click)="navigateToProfile()">
      <i class="fas fa-user-cog"></i>
      <span>Profil DÃ¼zenle</span>
    </button>
    <button class="menu-item" [class.active]="isActiveRoute('/settings')" (click)="navigateToSettings()">
      <i class="fas fa-cog"></i>
      <span>Ayarlar</span>
    </button>
  </div>


</div>
